<h1>Pet-project Финансовый дневник</h1>
<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSl9pRnJDzQV1lIeKuv8aPioTDi8E1nbRQv2w&usqp=CAU" alt="Финансовый дневник">
<p>Данный веб-сервис предназначен для отслеживания инвестиционного портфеля</p>

<p>В разделах сайта можно найти информацию о направлениях инвестирования, составе портфеля
а также различные графики стоимостей и возможность скачать отчёты</p>

<p>Далее будет подробно описано содержимое сайта и какие технологии для этого использовались</p>

<h2>Авторизация</h2>

<h3>Web авторизация</h3>
<p>Для авторизации использовался шаблон laravel php artisan ui:auth</p>
<p>В <a href="https://github.com/Kozavochka/Financal-diary/tree/ecdfc57af80b746f0951fbe3248a66cbb8cdb3ef/app/Http/Controllers/Auth">контроллерах авторизации</a> использовался стандартный middleware (guest), поэтому
маршруты доступны без авторизации</p>
<p>Далее в маршрутах используется middleware auth, который даёт доступ ко всем страницам,
которые доступны для гостей. Скачивание всех отчётов также лежит под auth.</p>
<p>Для администратора авторизация и вход такой же как и для обычного пользователя,
права администратору выдаются вручную в базе данных. Переход в админ панель находится
под middleware 'admin.panel', а ссылка под <a href="https://github.com/Kozavochka/Financal-diary/blob/develop/app/Policies/AdminPolicy.php">Policy</a></p>
<p>Посмотреть все используемые middleware можно в <a href="https://github.com/Kozavochka/Financal-diary/blob/bd271dc47d2cdebb454858e1f15937abd6c96a9a/app/Http/Kernel.php">HTTP/Kernel</a></p>

<h4>Интеграция с Тelegram</h4>
<p>Подробнее об использовании и настройки ТГ ботов будет описано ниже</p>
<p>При <b>регистрации пользователя</b> создаётся событие, в котором вызываются необходимые методы
для отправки мне(админу) почты и имени зарегистрированного пользователя.
</p>
<p>Также реализовано <b>восстановления пароля</b> пользователя. Для этого ему нужно запустить диалог с Telegram ботом.
При восстановлении пароля в чат к боту придёт код, с помощью которого можно будет сделать новый пароль</p>

<h3>API авторизация</h3>
<p>Также реализована регистрация и авторизация с помощью JWT токена, используя "php-open-source-saver/jwt-auth"</p>
<p>В API/Admin/AuthController реализованы необходимые методы и получение токена.
Создан open-api для аутентификации, api остался для зарегистрированных пользователей. 
Настройка jwt, включая время жизни токена, находится в jwt.php</p>
<p>Для пользователей api создан JwtMiddleware, который проверяет jwt токен, а для админа AdminApiMiddleware,где проверяется роль пользователя</p>

<h2>Состав портфеля</h2>
<h3>Модели</h3>
...модели и связи
..отображение, запросы и тд
...что видит пользователь, его возможности
...графики, как получается информация для них
...отчёты
<h2>Админ панель</h2>
..функционал
..обновление тг бота
..поступления
..сортировки
.? artisan команды
..для чего нужно отслеживание
..police
..очереди?
<h2>Отчёты PDF\Excel</h2>
..pdf отчёты, как составляются, что используется
..excel отчёты
<h2>Интеграция с ТГ</h2>
..где хранятся данные бота
..команды ботов
..оповещение админа при регистрации
..восстановление пароля
<h2>Интеграция с API фондовых и крипто рынков</h2>
..alpha
..moex
